![AlphaBot Use Case Diagram](./useCaseDiagram.png)

### Use Case #N : <제목>

**Summary**  
: 

**Scope / Level**  
: <Scope>, <Level>

**Author / Last Updated**  
: <Author>, <Last Updated>

**Actors**  
: Primary – <>, Secondary – <>

**Status**  
: <Analysis / Draft / …>

**Preconditions**  
: 

**Trigger**  
: 

**Post Conditions**  
: Success – <> / Failed – <>

**Main Flow**
1. 
2. 
3. 

**Extensions**
- 2a. <조건> → 2a1. <동작>
- 3b. <조건> → 3b1. <동작>

**Related**
- Performance: ≤ n s / Frequency: / Concurrency: / Due Date:








### Use Case #예제 : 종목 검색

**Summary**  
: 사용자가 티커/종목명을 입력해 관련 종목 목록과 핵심 메타데이터를 조회한다.

**Scope / Level**  
: 종목 정보 조회 및 관리, User level

**Author / Last Updated**  
: 김지광(예제), 2025-10-29

**Actors**  
: Primary – 인증 사용자  
: Secondary – 외부 금융 데이터 API, 시스템(검색 캐시/로그)

**Status**  
: Analysis

**Preconditions**  
: 로그인 상태, 네트워크 연결 가능, 외부 API 자격 정보 유효

**Trigger**  
: 검색창에 티커/종목명 입력 후 Enter 또는 검색 아이콘 클릭

**Post Conditions**  
: Success – 결과 목록 표시 및 검색어가 검색 기록에 저장됨 / Failed – 오류 또는 결과 없음 안내, 검색 기록 미저장

**Main Flow**
1. 사용자가 검색어(티커/종목명)를 입력한다.
2. 시스템이 입력을 검증 및 정규화한다.
3. (선택) 자동완성 후보를 제시한다.
4. 사용자가 검색을 확정한다.
5. 시스템이 캐시를 조회하고, 미적중 시 외부 금융 데이터 API를 호출한다.
6. 시스템이 결과를 정렬·정규화하여 목록을 구성한다.
7. 시스템이 결과 목록(티커, 종목명, 거래소, 현재가 요약 등)을 표시한다.
8. 시스템이 검색어와 시각을 사용자 검색 기록에 저장한다.

**Extensions**
- 2a. 입력 공백/최소 글자수 미달 → “검색어를 입력하세요” 메시지, 종료
- 5a. API 타임아웃/오류 → 1회 재시도, 캐시 있으면 캐시 사용·없으면 오류 안내
- 6a. 결과 0건 → “일치하는 종목이 없습니다”와 검색 도움말 노출
- 8a. 비인증 사용자 → 결과는 표시, 검색 기록 저장은 생략
- 5b. 호출 제한 초과 → 지수 백오프 적용 후 실패 시 안내 배너

**Related**
- Performance: 캐시 ≤ 0.5 s, API ≤ 2 s
- Frequency: 상시
- Concurrency: 제한 없음(서버에서 레이트 리밋)
- Due Date: N/A





### Use Case #1 : 종목 상세 정보 조회

**Summary**  
: 사용자가 별도 분석 영역의 검색창에서 주식 종목을 선택하면, 해당 종목의 실시간 시세 및 상세 정보를 '상세 정보' 탭에 표시하는 기능이다.

**Scope / Level**  
: 주식 챗봇 시스템, User level

**Author / Last Updated**  
: 이초은, 2025.10.29

**Actors**  
: Primary – 챗봇 인증 사용자

**Status**  
: Analysis 

**Preconditions**  
: 종목 분석 영역이 활성화되어 있어야 한다.

**Trigger**  
: 사용자가 종목 분석 영역 내 검색창에 종목명을 입력하고 검색을 확정했을 때

**Post Conditions**  
: Success – 종목 분석 영역이 활성화되고, 기본으로 '상세 정보' 탭에 실시간 시세 정보가 출력된다. / Failed – 검색된 종목이 없거나, 실시간 시세 조회에 실패하여 오류 메시지가 표시된다.

**Main Flow**
1. 사용자가 종목 분석 영역을 통해 정보 조회를 시작한다.
2. 사용자는 종목 분석 영역의 상단 검색창에 종목명 또는 코드를 입력하고 검색한다.
3. 시스템은 검색 결과 목록을 표시하고, 사용자는 원하는 종목을 선택한다.
4. 시스템은 선택된 종목의 실시간 시세 데이터를 조회하고, 상세 정보 탭에 현재가, 등락률, 거래량 등 상세 시세 정보를 출력한다.
5. 이 Use case는 사용자가 재무제표 탭을 선택하거나 영역을 닫으면 종료된다.

**Extensions**
- 3a. 입력된 정보와 일치하는 종목이 없어 검색 결과가 표시되지 않는다. → 3a1. "검색 결과가 없습니다." 메시지를 검색창 아래에 출력한다.
- 4a. 선택된 종목의 실시간 시세 조회에 실패한다. → 4a1. "실시간 시세 정보를 불러올 수 없습니다." 메시지를 해당 탭에 출력한다.

**Related**
- Performance: 종목 선택 후 기본 정보 표시 ≤ 2 s 
- Frequency: 회원당 하루에 평균 10번
- Concurrency: 제한 없음
- Due Date: N/A


### Use Case #2 : 휴지통 관리

**Summary**  
: 사용자가 삭제한 챗봇 대화 기록이나 저장된 답변 목록을 조회하고, 선택된 항목을 복원하거나 영구 삭제하는 기능이다.

**Scope / Level**  
: 주식 챗봇 시스템, User level

**Author / Last Updated**  
: 이초은, 2025.10.29

**Actors**  
: Primary – 챗봇 인증 사용자

**Status**  
: Analysis 

**Preconditions**  
: 사용자가 이전에 챗봇 대화 기록 또는 저장된 답변을 삭제하여 휴지통에 보관된 항목이 최소 1개 이상 존재해야 한다.

**Trigger**  
: 사용자가 챗봇 사이드바에서 휴지통 메뉴를 클릭했을 때

**Post Conditions**  
: Success – 사용자는 휴지통 목록을 조회하며, 선택한 항목을 성공적으로 복원되거나 영구 삭제한다. / Failed – 휴지통 목록 조회 또는 복원/삭제 과정에서 오류가 발생하여 작업에 실패한다.

**Main Flow**
1. 사용자가 휴지통 관리 기능을 시작한다. 
2. 사용자는 사이드바에서 휴지통 메뉴를 클릭한다.
3. 시스템은 휴지통에 보관된 모든 항목(대화 기록, 저장된 답변)의 목록을 사용자에게 출력한다.
4. 사용자는 목록에서 원하는 항목을 선택하고 복원 또는 영구 삭제 버튼을 클릭한다.
5. 시스템은 선택된 항목에 대한 요청된 작업을 성공적으로 수행하고 목록을 갱신한다.
6. 이 Use cae는 사용자가 휴지통 화면을 벗어나면 끝난다.

**Extensions**
- 4a. 사용자가 ‘영구 삭제’를 선택한다.
 → 4a1. 시스템은 사용자에게 최종 확인 경고 메시지를 출력한다.
 → 4a2. 사용자가 ‘확인’을 누르면 시스템은 해당 항목을 영구 삭제한다.
- 5a.서버 통신 오류로 인해 복원/삭제 작업에 실패한다. → 4a1. “작업에 실패했습니다.” 메시지를 출력하고, Step 3로 돌아간다.

**Related**
- Performance: ≤ 1 s
- Frequency: 회원당 주 평균 3회
- Concurrency: 제한 없음
- Due Date: N/A


### Use Case #3 : 재무제표 조회

**Summary**  
: 종목 상세 정보 조회 Use Case를 통해 종목이 선택된 상태에서, 사용자가 별도 분석 영역의 탭 전환을 통해 해당 종목의 재무제표 데이터를 조회하고 핵심 지표를 확인하는 기능이다.

**Scope / Level**  
: 주식 챗봇 시스템, User level

**Author / Last Updated**  
: 이초은, 2025.10.29

**Actors**  
: Primary – 챗봇 인증 사용자

**Status**  
: Analysis

**Preconditions**  
: 1. 종목 분석 영역이 활성화되어 있어야 한다. 
  2. 해당 영역에서 조회할 종목이 이미 선택되어 있어야 한다. 
  3. 현재 상세 정보 탭에 있거나, 재무제표 탭에 진입하기 직전 상태여야 한다.

**Trigger**  
: 사용자가 종목 분석 영역 내에서 재무제표 탭을 클릭했을 때

**Post Conditions**  
: Success – 종목 분석 영역이 재무제표 탭으로 전환되며, 재무제표 데이터가 표 및 그래프 형태로 출력된다. / Failed – 해당 종목의 재무 데이터가 존재하지 않거나, 조회에 실패하여 오류 메시지가 표시된다.

**Main Flow**
1. 사용자가 재무제표 조회 기능을 시작한다.
2. 사용자는 종목 분석 영역 내 탭 메뉴에서 재무제표 탭을 클릭한다.
3. 시스템은 선택된 종목에 대한 재무제표 데이터를 조회한다.
4. 시스템은 조회된 데이터를 바탕으로 재무 상태표, 손익계산서, 현금흐름표 등을 재무제표 탭에 기간별/시각화 형태로 출력한다.
5. 이 Use case는 사용자가 다른 탭을 선택하거나 종목 분석 영역을 닫으면 종료된다.

**Extensions**
- 3a. 해당 종목에 대한 재무 데이터가 존재하지 않거나, 조회에 실패한다. → 3a1. "재무 데이터가 존재하지 않거나, 조회에 실패했습니다." 메시지를 해당 탭에 출력한다.

**Related**
- Performance: 탭 전환 후 데이터 표시 ≤ 3 s
- Frequency: 회원당 하루 평균 5회
- Concurrency: 제한 없음
- Due Date: N/A


### Use Case #6 : 뉴스/공시 수집 및 필터링

**Summary**  
: 종목 또는 키워드로 최신 뉴스·공시를 수집하고, 기간/유형/출처/감성 필터를 적용해 원하는 결과만 카드로 확인한다. (SRS 기반, SDS_example의 Description 표 방식 준용)

**Scope / Level**  
: Market Intelligence (News & Disclosures), User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 뉴스/공시 수집기(크롤러·연동 API), 필터 엔진, 요약·감성 분석기, 시간대 변환기

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 종목 식별자 또는 키워드 입력 가능 (c) 네트워크 연결 정상

**Trigger**  
: 사용자가 “뉴스/공시” 탭을 열고 기간·유형·출처·감성 등 필터를 설정한 뒤 “조회”를 실행

**Post Conditions**  
: Success – 필터가 적용된 뉴스/공시 카드 리스트 생성(매체/시간[KST]/링크 표기), 정렬·필터 재적용 가능 / Failed – “관련 소식이 없습니다” 또는 오류 안내 표시

**Main Flow**
1. 사용자는 종목(또는 키워드)을 입력하고 기간·유형(뉴스/공시/전체)·출처·감성(긍/부/중립/전체) 필터를 지정한다.
2. 시스템은 외부 뉴스 API 및 공시 시스템에서 문서를 수집한다.
3. 시스템은 문서를 표준 스키마(제목, 요약, 매체/기관, 게시 시각[KST], 링크, 유형)로 정규화한다.
4. 시스템은 중복/유사 문서를 병합하고 신뢰도 기준으로 대표 문서를 선택한다.
5. 시스템은 지정된 필터를 적용한다.
6. 시스템은 결과를 카드 리스트로 렌더링하고 최신순(기본) 또는 관련도 정렬을 제공한다.
7. 사용자는 ‘요약 보기’ 토글로 3~5문장 요약과 감성 라벨을 확인하거나 필터·정렬을 변경해 재조회한다.

**Extensions**
- 2a. 외부 API 실패/타임아웃 → 2a1. 부분 성공분 우선 표시 및 “재시도” 버튼 제공
- 3b. 언어/형식 상이로 정규화 실패 → 3b1. 원문 카드로 대체(요약/감성 숨김)
- 4c. 유사 기사 다수 → 4c1. 대표 1건만 노출, 나머지는 “유사 n건”으로 접기
- 5d. 필터 결과 0건 → 5d1. “관련 소식이 없습니다”와 함께 필터 초기화/완화 제안
- 6e. 원문 링크 오류(404/권한) → 6e1. 캐시 썸네일·발췌 표시 및 “대체 출처 열기” 제공
- 7f. 자동 요약 실패 → 7f1. ‘원문만 보기’로 전환 및 ‘요약 재시도’ 버튼 표시

**Related**
- Performance: ≤ 3 s
- Frequency: 수시(사용자 요청 시)
- Concurrency: 동시 다중 조회
- Due Date: M3

### Use Case #6 : 뉴스/공시 요약 및 감성 분석

**Summary**  
: 뉴스/공시 원문을 자동으로 3~5문장으로 요약하고, 긍/부/중립 감성과 신뢰도를 산출해 카드에 표시한다.

**Scope / Level**  
: NLP Analytics (Summarization & Sentiment), User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 요약 엔진, 감성 분석기, 언어 감지기/번역기, 모델 서빙/캐시

**Status**  
: Draft

**Preconditions**  
: (a) 뉴스/공시 수집 결과가 존재 (b) 모델 리소스 및 네트워크 가용 (c) 문서 본문 텍스트 추출 가능

**Trigger**  
: 사용자가 ‘요약 보기’ 또는 ‘감성 표시’ 기능을 활성화하거나, 기사 카드를 열람

**Post Conditions**  
: Success – 각 카드에 요약, 감성 라벨/신뢰도, 핵심 키워드가 표시됨 / Failed – 요약·감성 비표시 및 안내 메시지 제공

**Main Flow**
1. 사용자는 기사/공시 카드에서 ‘요약 보기’(옵션: 길이/스타일) 또는 ‘감성 표시’를 활성화한다.
2. 시스템은 언어를 감지하고 본문을 정제·토큰화하여 모델 입력 크기 제한을 점검한다.
3. 시스템은 요약 엔진을 호출해 3~5문장 요약을 생성하고, 길이/중복/금지어 정책을 적용한다.
4. 시스템은 감성 분석기를 호출해 긍/부/중립 라벨과 신뢰도 스코어를 산출한다.
5. 시스템은 결과를 카드에 표시한다(요약, 감성 라벨/신뢰도, 핵심 키워드, 처리 시각, 모델 버전).
6. 사용자는 감성 필터(예: 부정만) 또는 요약 길이 옵션을 변경해 결과를 재생성한다.
7. 시스템은 결과를 캐시하고, 동일 문서 재요청 시 캐시를 우선 제공한다(모델/정책 버전 포함).

**Extensions**
- 2a. 입력 길이 초과 → 2a1. 본문을 절/단락 단위로 분할 후 병합 요약(Map-Reduce) 수행
- 3b. 요약 실패/타임아웃 → 3b1. 원문 발췌(선두 2~3문장)로 대체, ‘재시도’ 버튼 제공
- 4c. 신뢰도 낮음(예: < 0.6) → 4c1. 라벨을 ‘중립(신뢰도 낮음)’으로 표시
- 5d. 다국어 문서 → 5d1. 기계번역 후 요약·감성 수행, ‘원문/번역 전환’ 토글 제공
- 6e. 재요약 과다 호출 → 6e1. 쿨다운 및 사용자 안내(남은 재시도 횟수 표시)
- 7f. 민감어/개인정보 포함 → 7f1. 안전 규칙에 따라 마스킹 후 로그 기록 및 관리 콘솔 알림

**Related**
- Performance: 요약 ≤ 1.2 s(캐시 미스)
- 감성 ≤ 0.4 s
- Frequency: 사용자 액션 기반 수시
- Concurrency: 동시 200요청
- Due Date: M3


### Use Case #7 : 출처 및 시점 확인

**Summary**  
: 수집된 뉴스/공시의 출처 신뢰도와 게시/배포 시점을 검증·정규화(KST 표준)하여 카드에 정확히 표기하고, 불일치·오류를 탐지해 정정한다.

**Scope / Level**  
: Source & Timestamp Verification, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 출처 검증기(도메인·매체 레지스트리), 타임존 정규화기, 링크 점검기, 아카이브 리졸버

**Status**  
: Draft

**Preconditions**  
: (a) 뉴스/공시 문서 메타데이터(제목/링크/게시시각/매체)가 존재 (b) 네트워크 연결 (c) 타임존/도메인 룩업 가능

**Trigger**  
: 사용자가 기사/공시 카드를 열람하거나, “출처/시점 자세히 보기”를 선택

**Post Conditions**  
: Success – 카드에 신뢰 가능한 출처명, 정규화된 시각(예: `2025-10-31 09:20 KST`), 원문/대체 링크, 시각 산출 근거가 표시됨 / Failed – 검증 불가 안내 및 대체 정보(아카이브/스크린샷 시각) 제공

**Main Flow**
1. 시스템은 문서의 `source_url`에서 도메인과 매체명을 추출하고 화이트리스트/신뢰도 지표로 매칭한다.
2. 시스템은 문서의 게시 시각 필드(예: `published_at`, `updated_at`)를 파싱하고 원문 타임존을 식별한다.
3. 시스템은 타임존을 KST로 변환하고,표시용(YYYY-MM-DD HH:mm KST)과 정렬용(UTC) 타임스탬프를 모두 저장한다.
4. 시스템은 `updated_at > published_at` 등 시각 불일치 여부를 점검하고, 정정·재게시 이력을 기록한다.
5. 시스템은 링크 가용성(200/3xx/4xx/5xx)을 점검하고, 불가 시 아카이브/캐시 링크를 확보한다.
6. 시스템은 카드에 매체명, 정규화된 시각, “원문/대체 열기” 링크, “시각 산출 근거(원문 타임존/변환)”를 표시한다.
7. 사용자는 “출처/시점 자세히 보기”에서 원문 시각, 타임존, 정규화 결과, 링크 점검 로그를 확인한다.

**Extensions**
- 1a. 미등록/의심 도메인 → 1a1. “검증되지 않은 출처” 배지 표시 및 신뢰도 낮음 처리  
- 2b. 시각 필드 누락/형식 오류 → 2b1. 본문/메타에서 패턴 추출 또는 크롤링 시각 대체 표시  
- 3c. 서머타임·오프셋 오인식 → 3c1. IANA TZ DB로 재판단, 불확실성 배지 부착  
- 4d. 재게시(수정) 감지 → 4d1. “정정됨” 배지와 최신 시각 노출, 원 게시 시각은 보조 정보로 표시  
- 5e. 링크 죽음/페이월 → 5e1. 아카이브 링크 우선 제공, 썸네일·발췌 대체, 페이월 안내  
- 6f. 원문·요약 시각 불일치 → 6f1. 원문 기준으로 정정하고 변경 이력 기록  
- 7g. 기관 공시(다중 타임스탬프: 접수/공시/배포) → 7g1. “접수/공시/배포”를 분리 표기, 정렬은 ‘공시 시각’ 기준

**Related**
- Performance: 출처/시각 검증 ≤ 600 ms/문서, 링크 점검 ≤ 800 ms(병렬)
- Frequency: 수집·열람 시
- Concurrency: 동시 500문서
- Due Date: M3


### Use Case #8 : 워치리스트 관리

**Summary**  
: 사용자가 관심 종목을 워치리스트에 추가/삭제/정렬/그룹화하고, 메모·정렬·중복 방지 및 일괄 가져오기를 통해 효율적으로 관리한다.

**Scope / Level**  
: Watchlist Management, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 워치리스트 저장소(백엔드), 종목 메타데이터 서비스, 동기화 모듈

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 종목 검색 또는 종목 코드 인식 가능 (c) 네트워크 연결 정상

**Trigger**  
: 사용자가 종목 상세의 “관심종목 추가” 버튼을 누르거나, 워치리스트 화면에서 “새로 추가/CSV 가져오기”를 선택

**Post Conditions**  
: Success – 워치리스트 항목/순서/그룹/메모가 저장·동기화되고 UI에 즉시 반영됨 / Failed – 오류 메시지 표시, 기존 상태 보존, 재시도 안내

**Main Flow**
1. 사용자는 추가 방법(상세 화면 버튼, 검색창에서 ‘★’ 아이콘, CSV 업로드, 수동 코드 입력) 중 하나를 선택한다.  
2. 시스템은 종목 코드 유효성 및 중복 여부를 검사한다.  
3. 유효하고 중복이 아니면 워치리스트에 항목을 저장하고 UI 목록을 갱신한다.  
4. 사용자는 드래그앤드롭으로 순서를 변경하거나, 폴더/태그를 지정해 그룹화한다.  
5. 사용자는 항목별 메모(최대 200자)를 추가/수정한다.  
6. 시스템은 변경 사항(추가/삭제/순서/그룹/메모)을 서버에 동기화한다.  
7. 사용자는 정렬(이름/가격변화/보유여부/커스텀)과 필터(그룹/태그)를 적용해 목록을 열람한다.  
8. (옵션) 사용자는 ‘알림 만들기’로 해당 종목의 가격/변동률 알림 설정 화면으로 이동한다.

**Extensions**
- 2a. 중복 종목 → 2a1. “이미 워치리스트에 있습니다” 토스트 표시, 상태 변경 없음  
- 2b. 코드 유효성 실패 → 2b1. “유효하지 않은 종목 코드” 안내 및 자동 추천(근접 매칭) 제안  
- 3c. 저장 실패(네트워크/서버) → 3c1. 로컬 큐에 임시 저장 후 재시도 버튼 제공, 실패 이력 표시  
- 4d. 그룹 한도 초과(예: 그룹 50개) → 4d1. 한도 안내 및 기존 그룹 정리/병합 제안  
- 5e. 메모 길이 초과 → 5e1. 남은 글자 수 안내 및 초과분 잘림 경고  
- 6f. 다중 기기 충돌(동시 수정) → 6f1. 서버 버전 우선 병합, 충돌 항목을 ‘검토 필요’ 섹션에 표시  
- 7g. CSV 가져오기(헤더/구분자 상이) → 7g1. 매핑 UI로 열 지정, 실패 라인 로그 다운로드 제공  
- 8h. 알림 미연동 플랜 → 8h1. 업그레이드/권한 안내 또는 알림 비활성 표시

**Related**  
- Performance: 추가/삭제/정렬 반영 ≤ 1 s, CSV 1k행 처리 ≤ 3 s
- Frequency: 수시
- Concurrency: 사용자별 격리, 다중 기기 동시 편집 허용
- Due Date: M2


### Use Case #9 : 포트폴리오 등록 및 관리

**Summary**  
: 사용자가 보유 종목과 거래(매수/매도/입금/출금/배당/수수료)를 등록·수정·삭제하고, 평균단가·보유수량·평가손익·수익률을 자동 산출하며, CSV/브로커 연동을 통한 일괄 업로드와 통화를 포함한 포트폴리오를 관리한다.

**Scope / Level**  
: Portfolio Management, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 브로커/커스텀 CSV 업로더, 시세/환율 API, 계산 엔진, 기업행동 처리기(분할/배당/합병)

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 종목 코드 확인 가능 (c) 시세/환율 조회 가능 (d) 포트폴리오가 없을 수도 있음(최초 생성)

**Trigger**  
: 사용자가 “포트폴리오” 화면에서 “추가”를 클릭하거나, CSV/브로커 연동을 통해 거래를 업로드

**Post Conditions**  
: Success – 포트폴리오가 저장/동기화되고 지표(평가금액, 손익, MWR/TWR 등)가 갱신됨 / Failed – 오류 메시지 및 문제 행(라인) 안내, 기존 데이터 보존

**Main Flow**
1. 사용자는 포트폴리오를 생성(이름/통화/기준 단위 선택)한다.  
2. 사용자는 거래를 입력한다(유형: 매수/매도/입금/출금/배당/수수료, 수량, 단가, 체결일, 통화, 메모).  
3. 시스템은 종목 코드 유효성 및 수량/가격 형식을 검증한다.  
4. 시스템은 거래를 저장하고, 보유수량·평균단가(수수료 포함 옵션)·잔고를 재계산한다(FIFO 기본, 설정에 따라 LIFO/가중평균).  
5. 시스템은 시세/환율 API를 조회하여 평가금액, 평가손익, 수익률, MDD, 섹터/자산배분 비중을 산출한다.  
6. 사용자는 항목을 수정/삭제하거나, 거래 히스토리를 정렬/필터(종목/기간/유형)한다.  
7. 사용자는 CSV 업로드(템플릿 제공) 또는 브로커 연동으로 거래를 일괄 등록하고, 매핑 결과를 확인한다.  
8. 시스템은 기업행동 이벤트(분할/합병/배당/권리락)를 적용하고, 관련 수량·단가·현금흐름을 조정한다.  
9. 대시보드에 포트 성과(MWR/TWR, 일/월간 손익, 누적 수익률), 위험지표, 상위 기여 종목을 표시한다.  
10. 사용자는 스냅샷(리밸런싱 기준일) 저장 및 내보내기(CSV/엑셀/PDF 요약)를 수행한다.

**Extensions**
- 2a. 잘못된 수량/단가(음수/자릿수 초과) → 2a1. 유효성 오류 메시지, 저장 차단  
- 3b. 미지원 종목 코드 → 3b1. 자동 추천(근접 매칭) 또는 사용자 확인 요청  
- 4c. 매도 수량이 보유 수량 초과 → 4c1. 경고 및 부분 체결/공매도 모드 선택 안내  
- 4d. 원화 외 통화 거래 → 4d1. 체결일 환율로 원화/기준통화 환산, 환율 미존재 시 인접 영업일 대체  
- 5e. 시세/환율 조회 실패 → 5e1. 마지막 정상값 사용(표시 배지: “지연”), 재시도 버튼 제공  
- 7f. CSV 헤더/구분자 상이 → 7f1. 매핑 UI 제공, 실패 라인 로그 다운로드  
- 7g. 브로커 API 인증 실패/만료 → 7g1. 재인증 유도 및 부분 입력(수동 보정) 허용  
- 8h. 분할/합병 과거 적용 시 정합성 깨짐 → 8h1. 재계산 시뮬레이션 미리보기, 사용자 확정 후 커밋  
- 9i. 성과 지표 계산 시간 초과(대용량) → 9i1. 비동기 계산 후 캐시 사용, UI에 진행 상태 표시  
- 10j. 삭제/되돌리기 요청 → 10j1. 최근 N분 내 변경 히스토리에서 롤백 제공

**Related**  
- Performance: 거래 저장 ≤ 800 ms, 재계산 ≤ 1.5 s(1만 건 기준), 대시보드 렌더 ≤ 1 s
- Frequency: 수시
- Concurrency: 사용자별 격리, 다중 기기 동시 편집 허용
- Due Date: M2


### Use Case #10 : 알람 편집/비활성화

**Summary**  
: 사용자가 기존 알람(가격/변동률/거래대금/맞춤 조건)을 편집(조건/임계값/유효기간/채널)하거나 비활성화/일시중지하여 알림 동작을 제어한다.

**Scope / Level**  
: Alert Management, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 알림 엔진, 규칙 저장소, 푸시/이메일 게이트웨이

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 최소 1개 이상의 알람 규칙이 존재 (c) 알림 엔진과의 연결 정상

**Trigger**  
: 사용자가 ‘알람 관리’ 화면에서 특정 알람의 ‘편집’ 또는 ‘비활성화/일시중지’(토글/메뉴)를 선택

**Post Conditions**  
: Success – 선택한 알람의 변경사항이 저장되고 즉시 반영(평가 스케줄/상태 갱신) / Failed – 오류 메시지 표시, 기존 규칙/상태 유지

**Main Flow**
1. 사용자는 알람 목록에서 편집할 규칙을 선택한다.  
2. 시스템은 현재 규칙(조건, 임계값, 대상 종목, 유효기간, 채널, 중복 방지/쿨다운)을 폼에 불러온다.  
3. 사용자는 필드를 수정한다(예: 가격 100,000원 → 105,000원, 채널: 웹+푸시, 유효기간 연장).  
4. 시스템은 형식/범위/상충 조건을 검증하고, 동일 규칙 중복 여부를 확인한다.  
5. 저장 시 시스템은 규칙 저장소를 업데이트하고 알림 엔진의 평가 스케줄/상태를 갱신한다.  
6. 사용자는 토글을 통해 규칙을 ‘비활성화(영구)’ 또는 ‘일시중지(기간 지정)’로 전환할 수 있다.  
7. 시스템은 결과를 토스트로 알리고, 목록/상세에 최신 상태(활성/비활성/일시중지-만료일)를 표시한다.

**Extensions**
- 4a. 유효성 실패(음수/누락/형식 오류) → 4a1. 오류 메시지와 문제 필드 강조, 저장 차단  
- 4b. 동일 조건 중복 → 4b1. “동일 알람이 존재합니다” 안내, 병합 또는 취소 선택 제공  
- 5c. 저장/엔진 동기화 실패 → 5c1. 재시도 버튼과 롤백 안내(기존 상태 유지)  
- 6d. 일시중지 기간 초과/부적합 → 6d1. 허용 범위를 안내하고 기본값(예: 7일)로 대체  
- 7e. 다중 기기 동시 편집 충돌 → 7e1. 최신 버전 우선, 차이점 비교 후 사용자 선택으로 병합

**Related**  
- Performance: 조회 ≤ 500 ms, 저장/상태 전파 ≤ 800 ms
- Frequency: 수시
- Concurrency: 사용자별 격리(동시 편집 허용, 충돌 해결)
- Due Date: M3


### Use Case #11 : 평가손익/수익률 계산

**Summary**  
: 거래·보유 데이터와 시세·환율·수수료·배당을 반영하여 종목/포트폴리오 단위의 평가손익(실현/미실현)과 수익률(TWR/MWR, 기간/연율화)을 계산·표시한다.

**Scope / Level**  
: Portfolio Analytics (P&L & Return Calculation), User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 계산 엔진, 시세/환율 API, 기업행동 처리기(분할/배당/권리락), 수수료/세금 규칙 모듈

**Status**  
: Draft

**Preconditions**  
: (a) 포트폴리오와 거래 이력 존재 (b) 종목별 현재가/환율 조회 가능 (c) 수수료·세금 정책 설정 완료

**Trigger**  
: 사용자가 포트폴리오 대시보드 또는 종목 상세에서 “평가손익”/“수익률”을 조회

**Post Conditions**  
: Success – 종목·포트폴리오의 실현/미실현 손익, TWR/MWR, 기간별 수익률 및 기여도(Contribution)가 계산되어 표시됨 / Failed – 일부 지표 미계산 시 대체 표시와 안내

**Main Flow**
1. 시스템은 종목별 보유수량, 평균단가(수수료/세금 포함 설정), 체결일 통화 정보를 수집한다.  
2. 시스템은 현재가와 체결일/평가일 환율을 조회하여 원화(또는 기준통화)로 환산한다.  
3. 시스템은 기업행동(분할/합병/배당/권리락)을 적용해 수량·단가·현금흐름을 조정한다.  
4. 시스템은 미실현 손익 = (현재가 − 평균단가) × 보유수량 − 미반영 수수료/세금을 계산한다.  
5. 시스템은 실현 손익 = 체결별 매도손익 − 수수료/세금 + 배당(세후)로 산출하고, 종목/기간별로 누적한다.  
6. 시스템은 단순 수익률, 일/월/연 누적 수익률을 계산하고, 포트폴리오 집계 시 가중 평균·기여도(종목/섹터)를 산정한다.  
7. 시스템은 현금흐름 시계열을 구성하여 TWR(기간별 링크 수익률)과 MWR(IRR/XIRR)을 계산한다.  
8. 시스템은 결과(P&L, 수익률, 환율/세금 가정, 계산 기준일, 모델 버전)를 위젯/표/차트로 표시한다.  
9. 사용자는 기준(원화/기준통화, 수수료 포함 여부, FIFO/LIFO/가중평균, 기간 창)을 바꿔 재계산한다.

**Extensions**
- 2a. 시세/환율 조회 실패 → 2a1. 마지막 정상값 사용(“지연” 배지) 및 재시도 버튼 제공  
- 3b. 과거 기업행동 반영 누락 → 3b1. 시뮬레이션 적용 미리보기 후 확정 시 재계산  
- 4c. 공매도/부분 체결 혼재 → 4c1. 포지션별 별도 손익 트랙과 넷팅 규칙 적용  
- 5d. 세금 규칙 지역별 상이 → 5d1. 프로파일 기반 규칙 적용, 미지원 항목은 추정치와 경고 제공  
- 6e. 대용량(≥10만 체결) → 6e1. 배치/증분 계산 및 캐시, UI 진행률 표시  
- 7f. MWR 수렴 실패/복수 해 → 7f1. 초기값 그리드 탐색 및 수렴 기준 완화, 실패 시 TWR만 표시  
- 8g. 기준통화 변경 → 8g1. 전 기간 환산 재계산(체결일 환율 우선, 부족 시 인접 영업일 대체)  
- 9h. 평가 기준일 과거 선택 → 9h1. 히스토릭 시세/환율로 백데이트 계산, 가정 차이 배지 표시

**Related**  
- Performance: 종목 1천개/체결 5만 건 기준 재계산 ≤ 2.5 s, 위젯 렌더 ≤ 1 s
- Frequency: 화면 진입·필터 변경·스케줄(일 1회)
- Concurrency: 사용자별 격리, 백그라운드 증분 집계
- Due Date: M3


### Use Case #12 : 알람 수신

**Summary**  
: 사전에 설정된 알람(가격/변동률/거래대금/맞춤 조건)이 충족될 때, 사용자에게 웹/푸시/이메일 등 선택 채널로 알림을 전달하고, 클릭 시 관련 화면(종목 상세/알람 상세)으로 진입한다.

**Scope / Level**  
: Alert Delivery, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 알림 엔진, 채널 게이트웨이(웹푸시/모바일푸시/이메일), 링크 라우터, 재시도 큐

**Status**  
: Draft

**Preconditions**  
: (a) 활성화된 알람 규칙 존재 (b) 채널 권한·주소(푸시 토큰/이메일) 유효 (c) 알림 엔진이 실시간/주기 평가 중

**Trigger**  
: 알람 조건 충족(가격 도달/변동률 초과/사용자 정의 조건 등) 또는 스케줄 평가 시 트리거 발생

**Post Conditions**  
: Success – 사용자에게 선택 채널로 알림이 도착하고, 앱/웹에서 배지·토스트와 알람함에 기록됨 / Failed – 전송 실패 로그 기록, 대체 채널/재시도 수행 및 사용자 안내

**Main Flow**
1. 알림 엔진은 활성 규칙을 평가하여 조건 충족 이벤트를 생성한다.  
2. 시스템은 중복/스팸 방지(쿨다운, 동일 조건 합치기)를 적용하고 페이로드(제목, 요약, 시각[KST], 종목, 조건, 링크)를 구성한다.  
3. 시스템은 사용자 설정에 따른 우선 채널(예: 모바일 푸시 → 웹 → 이메일)로 전송한다.  
4. 채널 게이트웨이는 전송 결과(성공/실패/지연)를 수신하여 상태를 리포팅한다.  
5. 사용자는 알람을 열람하여 종목 상세 또는 알람 상세 화면으로 라우팅된다.  
6. 시스템은 알람함에 기록을 저장하고 읽음/삭제/고정 상태를 관리한다.  
7. (옵션) 사용자는 알람에서 “일시중지/비활성화/편집”을 바로 수행한다(빠른 액션).

**Extensions**
- 2a. 동일 조건 다중 트리거(짧은 시간 내 반복) → 2a1. 합치기 규칙으로 1건으로 묶어 전송, 알람함에 ‘묶음 n건’ 표시  
- 3b. 선택 채널 전송 실패 → 3b1. 대체 채널로 자동 폴백(예: 푸시 실패 → 이메일), 실패 사유 로그  
- 3c. 푸시 권한 없음/토큰 만료 → 3c1. 권한 요청 또는 재인증 유도, 일시적으로 웹 배지 우회 제공  
- 4d. 게이트웨이 타임아웃 → 4d1. 지수 백오프 재시도 및 최대 N회 후 실패 처리  
- 5e. 딥링크 불가/만료 → 5e1. 기본 라우트(앱 홈/종목 검색)로 대체, 사유 안내  
- 6f. 알람 과다(폭주) → 6f1. 레이트 리밋 및 요약 알람(“5분 간 12건”) 제공, 상세는 알람함에서 확인  
- 7g. 근무시간/야간 모드 → 7g1. 사일런트 전송(배지/함 기록만) 또는 지연 배달, 정책에 따라 오전 일괄 전송

**Related**  
- Performance: 조건 충족 후 전송 개시 ≤ 1 s, 게이트웨이 왕복 ≤ 800 ms
- Frequency: 시장 이벤트 기반
- Concurrency: 동시 다중 전송(수만 건/분)
- Due Date: M3


### Use Case #13 : 가격/이벤트 알림 설정

**Summary**  
: 사용자가 종목별로 가격(이상/이하), 변동률, 거래대금, 캔들 패턴, 공시/뉴스 키워드 등 이벤트 조건을 정의하고, 채널·유효기간·쿨다운과 함께 알람 규칙을 생성한다.

**Scope / Level**  
: Alert Rule Creation, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 알림 엔진, 시세/이벤트 스트림, 규칙 저장소, 검증기(단위/형식), 푸시 권한 관리자

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 대상 종목 식별 가능 (c) 시세/이벤트 소스 연결 정상 (d) 푸시/이메일 권한(선택) 확보

**Trigger**  
: 사용자가 종목 상세 또는 ‘알림 만들기’ 화면을 열고 조건/임계값/채널/유효기간을 입력 후 “저장”을 선택

**Post Conditions**  
: Success – 알람 규칙이 저장되고 즉시 활성화(엔진 스케줄 반영), 규칙 카드가 알람 목록에 표시됨 / Failed – 유효성 오류 또는 중복 규칙 안내, 저장 취소

**Main Flow**
1. 사용자는 알림 유형을 선택한다(가격 ≥/≤, 변동률 x%↑/↓, 거래대금 ≥ N, 캔들/기술 시그널, 키워드 이벤트 등).  
2. 사용자는 임계값, 감시 구간(장중/종가/장전·장후), 평가 빈도, 유효기간(시작~종료), 중복 방지(쿨다운)를 설정한다.  
3. 사용자는 채널(웹/모바일 푸시/이메일)과 조용 모드(야간/근무시간 제외), 중요도(일반/중요)를 지정한다.  
4. 시스템은 입력 형식·범위·단위를 검증하고, 동일 종목·동일 조건의 중복 규칙 존재 여부를 확인한다.  
5. 시스템은 규칙을 저장하고 알림 엔진에 등록하여 평가 스케줄(실시간/주기)을 갱신한다.  
6. 시스템은 성공 토스트와 함께 규칙 카드(조건 요약, 채널, 유효기간, 상태)를 목록에 추가한다.  
7. 사용자는 저장 직후 ‘테스트 전송’을 눌러 채널 도달성을 확인할 수 있다(선택).

**Extensions**
- 2a. 임계값 형식 오류/범위 초과 → 2a1. 오류 메시지와 문제 필드 강조, 저장 차단  
- 3b. 푸시 권한 없음/토큰 만료 → 3b1. 권한 요청 또는 재인증 유도, 임시로 웹 배지만 활성화  
- 4c. 동일 조건 중복 감지 → 4c1. 기존 규칙으로 병합 제안 또는 ‘중복 허용(채널만 추가)’ 선택 제공  
- 5d. 엔진 등록 실패/타임아웃 → 5d1. 규칙 저장 롤백, 재시도 버튼 및 로그 ID 표시  
- 6e. 유효기간 과거/충돌 → 6e1. 최근 시각으로 자동 보정 또는 사용자 재입력 요청  
- 7f. 테스트 전송 실패 → 7f1. 대체 채널 폴백(푸시→이메일) 후 결과 보고

**Related**  
- Performance: 검증·저장 ≤ 700 ms, 엔진 반영 ≤ 1 s
- Frequency: 수시
- Concurrency: 사용자별 격리(동시에 수십 규칙 생성 허용)
- Due Date: M3


### Use Case #14 : 종목 검색

**Summary**  
: 사용자가 종목명/티커/ISIN으로 검색하여 일치 또는 유사 결과를 확인하고, 선택 시 종목 상세 화면으로 이동한다. 자동완성, 최근 검색, 오타 보정/근접 매칭을 지원한다.

**Scope / Level**  
: Equity Information Retrieval, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 종목 메타데이터 서비스(검색 API), 자동완성 엔진, 검색 기록 모듈

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태(정책에 따라 비로그인 제한 가능) (b) 네트워크 연결 정상 (c) 종목 메타데이터 인덱스 최신화

**Trigger**  
: 사용자가 상단 검색창에 검색어(종목명/티커/ISIN)를 입력하고 Enter 또는 검색/결과 선택을 수행

**Post Conditions**  
: Success – 결과 리스트 또는 바로가기(Top Hit)가 표시되고, 선택 시 종목 상세 화면으로 이동하며 검색 기록이 저장됨 / Failed – “검색 결과가 없습니다” 표시 및 대체 제안

**Main Flow**
1. 사용자는 검색창에 키워드를 입력한다(한/영/로마자/대소문자 무관).  
2. 시스템은 디바운스(예: 250ms) 후 자동완성 후보(종목명, 티커, 거래소, 섹터)를 표시한다.  
3. 사용자는 자동완성 후보를 선택하거나 Enter로 전체 검색을 실행한다.  
4. 시스템은 정확 일치(티커/ISIN/정규화된 종목명) 우선, 그 외에는 유사도/인기·거래대금 가중치로 결과를 정렬한다.  
5. 시스템은 결과 리스트(종목명, 티커, 거래소, 통화, 현재가 요약 배지)를 표시한다.  
6. 사용자가 결과를 선택하면 종목 상세 화면으로 이동한다(요약/차트/재무 탭).  
7. 시스템은 검색어·선택 결과를 최근 검색(최대 N개)에 저장하고, 다음 진입 시 드롭다운에 노출한다.

**Extensions**
- 2a. 입력이 1~2자 등 짧음 → 2a1. 인기 종목/최근 검색 프롬프트를 우선 노출  
- 3b. 외부 API 지연/오류 → 3b1. 로컬 캐시/마지막 인덱스에서 부분 결과 제공, 재시도 버튼 표시  
- 4c. 오타/철자 변형(예: ‘삼성전자’→‘삼성전’) → 4c1. 퍼지 매칭/동의어 사전으로 보정 후보 제안  
- 4d. 다중 거래소 동명이인(예: “AAPL” vs 지역 DR) → 4d1. 거래소/통화 배지로 구분, 기본 우선순위 규칙 안내  
- 5e. 결과 0건 → 5e1. 필터 완화/언어 전환/로마자 검색 제안 및 이슈 신고 링크 제공  
- 6f. 비거래 시간 현재가 표시 제한 → 6f1. “전장/장후” 배지 표기 및 최신 시세 기준 시각 표시  
- 7g. 개인정보 모드(최근 검색 비저장) → 7g1. 토글 활성 시 기록 저장 생략

**Related**  
- Performance: 자동완성 ≤ 300 ms, 전체 검색 ≤ 2.0 s
- Frequency: 매우 빈번
- Concurrency: 다수 동시 조회
- Due Date: M2


### Use Case #15 : 종목 토론 댓글 작성

**Summary**  
: 사용자가 종목 토론 게시글에 댓글을 작성(텍스트/이모지/멘션/이미지 첨부)하여 의견을 공유하고, 실시간으로 스레드에 반영된다.

**Scope / Level**  
: Community (Comments), User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 댓글 서비스(백엔드), 스팸/욕설 필터, 알림 엔진, 실시간 채널(웹소켓)

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 유효한 종목 토론 게시글 존재 (c) 네트워크 연결 정상

**Trigger**  
: 사용자가 게시글 하단 입력창에 내용을 작성하고 “등록”을 클릭(또는 ⏎)

**Post Conditions**  
: Success – 댓글이 게시글 스레드에 추가되고, 작성자/멘션 대상에게 알림이 전송됨 / Failed – 오류 메시지 표시(내용 보존), 재시도 가능

**Main Flow**
1. 사용자는 댓글 입력창에 텍스트를 입력하고 필요한 경우 이모지, 멘션(@아이디), 이미지(옵션, 최대 N MB)를 첨부한다.  
2. 시스템은 입력 길이/형식(최대 글자수, 금지 태그), 첨부 용량/포맷을 검증한다.  
3. 시스템은 스팸/욕설/광고 필터와 금칙어 정책을 적용한다.  
4. 통과 시 시스템은 댓글을 저장하고 게시글 스레드에 실시간 반영한다(웹소켓 브로드캐스트).  
5. 시스템은 작성자에게 성공 토스트를 표시하고, 멘션 대상/글 작성자에게 알림을 보낸다.  
6. 사용자는 방금 작성한 댓글을 확인하고, 일정 시간 내 수정/삭제(허용 정책 내)를 수행할 수 있다.

**Extensions**
- 2a. 형식/길이/첨부 용량 초과 → 2a1. 문제 필드 강조와 안내, 저장 차단  
- 3b. 필터 위반(욕설/광고/금칙어) → 3b1. 등록 차단 및 가이드 표시, 반복 시 제재(사유 로그)  
- 4c. 서버/네트워크 오류 → 4c1. 로컬 큐 임시 저장 후 재시도 버튼 제공, 실패 시 임시본 유지  
- 5d. 멘션 대상 비활성/차단 관계 → 5d1. 알림 미전송, 댓글은 일반 공개로 등록  
- 6e. 수정 가능 시간 초과/권한 부족 → 6e1. 수정/삭제 버튼 비활성화 및 안내  
- 6f. 이미지 바이러스/악성 의심 → 6f1. 업로드 차단, 보안 경고 표시  
- 6g. 신고 접수(다른 사용자) → 6g1. 자동 숨김 임계치 도달 시 블라인드, 모더레이터 검토 큐 이동

**Related**  
- Performance: 입력→게시 ≤ 600 ms, 실시간 반영 지연 ≤ 300 ms
- Frequency: 수시
- Concurrency: 다중 사용자 동시 댓글
- Due Date: M2


### Use Case #16 : 종목 토론 댓글 조회

**Summary**  
: 사용자가 특정 종목의 토론 게시글에서 댓글 목록을 조회하고, 최신순/추천순/작성자/멘션/내 댓글 등으로 필터·정렬하여 스레드 형태로 탐색한다.

**Scope / Level**  
: Community (Comments), User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 댓글 서비스(백엔드), 캐시/페이지네이션 모듈, 실시간 채널(웹소켓), 신고/차단 필터

**Status**  
: Draft

**Preconditions**  
: (a) 유효한 종목 토론 게시글 존재 (b) 네트워크 연결 정상 (c) 사용자 권한/차단 목록 적용 가능

**Trigger**  
: 사용자가 종목 토론 게시글을 열람하거나, 댓글 영역으로 스크롤/“댓글 더보기” 클릭

**Post Conditions**  
: Success – 댓글 리스트가 조건에 맞춰 페이지네이션/스레드 구조로 표시되고, 실시간 신규 댓글이 반영됨 / Failed – 오류 메시지 및 재시도/새로고침 안내

**Main Flow**
1. 사용자는 댓글 영역을 열람한다(초기 정렬: 최신순, 페이지 크기 기본 N).  
2. 시스템은 게시글 ID와 사용자 컨텍스트(차단/신고 상태)를 기반으로 첫 페이지 댓글을 조회한다.  
3. 시스템은 스레드(부모-자식) 구조로 정렬하여 렌더링하고, 접기/펼치기 상태를 초기화한다.  
4. 사용자는 정렬(최신순/추천순)과 필터(작성자, 멘션 @me, 내 댓글만, 이미지 포함)를 적용할 수 있다.  
5. 사용자가 “더보기” 또는 무한 스크롤로 다음 페이지를 요청하면, 시스템은 커서 기반 페이지네이션으로 추가 로드를 수행한다.  
6. 시스템은 실시간 채널 구독을 통해 신규/수정/삭제 이벤트를 수신하여 화면에 반영한다(신규 배지/하이라이트).  
7. 사용자는 신고/차단된 사용자 댓글이 숨김 처리됨을 확인하고, 필요 시 “보기”를 선택해 일시 노출한다(권한 내).

**Extensions**
- 2a. 서버/네트워크 오류 → 2a1. 에러 토스트와 재시도 버튼 제공, 부분 로드 성공분은 유지  
- 3b. 스레드 깊이 과다(예: 5단계 초과) → 3b1. 이후는 ‘더보기’ 링크로 축약 표시  
- 4c. 필터 결과 0건 → 4c1. “조건에 맞는 댓글이 없습니다” 메시지와 필터 초기화 제안  
- 5d. 마지막 페이지 도달 → 5d1. “마지막 댓글입니다” 표시, 추가 로드 비활성화  
- 6e. 삭제/블라인드 댓글 → 6e1. “삭제됨/블라인드” 플레이스홀더와 사유 배지 표시  
- 6f. 동시 수정 충돌 → 6f1. 최신 버전 우선 반영, 변경 히스토리 아이콘 표시  
- 7g. 차단 사용자 콘텐츠 → 7g1. 기본 숨김, 일시 노출 시 세션 한정으로만 표시

**Related**  
- Performance: 첫 페이지 조회 ≤ 500 ms, 추가 페이지 ≤ 400 ms, 실시간 반영 ≤ 300 ms
- Frequency: 수시
- Concurrency: 다중 사용자 동시 열람
- Due Date: M2


### Use Case #17 : 카테고리 관리

**Summary**  
: 사용자가 개인화 카테고리를 생성/이름변경/삭제하고, 색상/아이콘/정렬을 지정하여 종목·알림·노트(게시글) 등을 분류한다. 항목은 드래그앤드롭으로 카테고리 간 이동된다.

**Scope / Level**  
: Personal Organization (Categories), User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 카테고리 저장소(백엔드), 동기화 모듈, 접근권한 검증기

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 기본 카테고리(예: 기본/미분류) 존재 (c) 네트워크 연결 정상

**Trigger**  
: 사용자가 “카테고리 관리” 화면을 열고 “새로 만들기/이름변경/삭제/정렬/색상 변경” 중 하나를 선택

**Post Conditions**  
: Success – 카테고리 및 속성(이름/색상/아이콘/순서)과 항목의 소속이 저장·동기화됨 / Failed – 오류 메시지 표시, 기존 상태 보존

**Main Flow**
1. 사용자는 “새 카테고리 만들기”를 선택하고 이름(필수), 색상/아이콘(옵션)을 설정한다.  
2. 시스템은 이름 중복/길이/금칙어를 검증하고 카테고리를 생성한다.  
3. 사용자는 리스트에서 카테고리 순서를 드래그앤드롭으로 변경한다.  
4. 사용자는 항목(종목/알림/노트)을 선택해 대상 카테고리로 이동한다(멀티 선택 지원).  
5. 사용자는 카테고리 이름/색상/아이콘을 수정할 수 있다.  
6. 시스템은 모든 변경 사항(생성/수정/순서/소속)을 서버에 저장하고 기기 간 동기화한다.  
7. 사용자는 카테고리를 삭제할 수 있으며, 시스템은 항목을 “미분류”로 이동하거나 다른 카테고리로 일괄 이동시키는 옵션을 제공한다.

**Extensions**
- 2a. 이름 중복/금칙어 → 2a1. 경고 메시지와 함께 저장 차단, 대체 이름 제안  
- 3b. 정렬 최대 한도 초과(예: 200개) → 3b1. 한도 안내 및 검색/필터 사용 권장  
- 4c. 이동 중 일부 항목 권한 부족/잠김 → 4c1. 이동 제외 목록을 표시하고 나머지만 처리  
- 5d. 시스템 기본 카테고리 수정/삭제 시도 → 5d1. 허용 범위(색상만)로 제한, 이유 안내  
- 6e. 저장/동기화 실패 → 6e1. 로컬 큐 임시 저장 후 재시도 버튼 제공, 실패 로그 표시  
- 7f. 삭제 후 되돌리기 요청 → 7f1. N분 이내 ‘되돌리기’ 제공, 이후에는 히스토리에서 복원

**Related**  
- Performance: 생성/수정/이동/삭제 ≤ 600 ms, 동기화 ≤ 1 s / Frequency: 수시 / Concurrency: 사용자별 격리(다중 기기 동시 편집 허용) / Due Date: M2


### Use Case #18 : 도움말 요청

**Summary**  
: 사용자가 화면 내 ‘도움말’에서 검색/가이드/FAQ/문의 생성(티켓)을 통해 문제 해결을 시도하고, 필요 시 실시간 상담으로 연결된다.

**Scope / Level**  
: Support & Help Center, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 헬프센터 검색(지식베이스), 가이드 투어 엔진, FAQ 모듈, 티켓/챗봇/실시간 상담(에이전트) 시스템

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 선택사항(티켓 작성은 로그인 권장) (b) 네트워크 연결 정상 (c) 지식베이스/FAQ 인덱스 최신화

**Trigger**  
: 사용자가 헤더/푸터/우측 플로팅 버튼의 ‘도움말’을 클릭하거나, 오류 메시지의 “도움 받기” 링크를 선택

**Post Conditions**  
: Success – 관련 도움말 문서/가이드가 표시되거나, 문의 티켓/채팅이 생성됨(추적번호 제공) / Failed – 검색/문의 실패 안내 및 대체 채널(이메일) 제시

**Main Flow**
1. 사용자는 도움말 패널을 연다(최근 검색어와 추천 주제 노출).  
2. 사용자는 키워드를 입력하거나 화면 컨텍스트(현재 페이지/오류 코드) 기반 추천 문서를 탭한다.  
3. 시스템은 지식베이스/FAQ를 검색하여 결과를 관련도 순으로 표시하고, 선택 시 문서 상세를 보여준다.  
4. 사용자는 문서 내 단계별 가이드/하이라이트(온보딩 투어)를 실행해 문제를 해결한다.  
5. 해결되지 않으면 “문의하기”를 선택하여 티켓 또는 라이브 채팅을 시작한다(주제/설명/첨부).  
6. 시스템은 티켓을 생성하고 추적번호, 예상 응답 시간, 진행 상태 조회 링크를 제공한다.  
7. 사용자는 도움말 패널에서 “피드백 보내기(문서 유용성 투표/코멘트)”를 남길 수 있다.

**Extensions**
- 2a. 키워드 모호/오타 → 2a1. 자동 교정·연관 검색어 제안 및 인기 FAQ 노출  
- 3b. 결과 0건 → 3b1. 범위 확장(영문/카테고리 전체)과 문의하기 CTA 강조  
- 4c. 가이드 중단/실패 → 4c1. 재시작 버튼과 텍스트형 대체 절차 제공  
- 5d. 첨부 파일 초과/형식 오류 → 5d1. 허용 포맷/용량 안내, 초과분 제외 업로드  
- 5e. 실시간 상담 대기 길음 → 5e1. 콜백/이메일 전환 옵션 제공  
- 6f. 티켓 생성 실패 → 6f1. 로컬 임시 저장 후 재시도, 실패 시 대체 채널 주소 안내  
- 7g. 악성/민감 정보 포함 → 7g1. 자동 마스킹 및 정책 안내, 필요 시 업로드 차단

**Related**  
- Performance: 검색 ≤ 500 ms, 문서 로드 ≤ 800 ms, 티켓 생성 ≤ 1 s
- Frequency: 수시
- Concurrency: 다수 동시 문의 처리(큐·우선순위)
- Due Date: M2


### Use Case #19 : 채팅 기록 조회

**Summary**  
: 사용자가 과거 채팅 세션과 메시지를 날짜/대화상대/키워드/태그로 검색·필터링하고, 스레드/타임라인 형태로 열람한다. 필요한 경우 북마크/복구/내보내기를 수행한다.

**Scope / Level**  
: Chat History, User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 채팅 저장소(백엔드), 검색 인덱스, 첨부 파일 저장소, 내보내기 모듈

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 최소 1개 이상의 채팅 세션/메시지 존재 (c) 검색 인덱스 최신화(백필 완료)

**Trigger**  
: 사용자가 ‘채팅 기록’ 화면을 열거나, 상단 검색창에서 “채팅” 범주를 선택해 조회

**Post Conditions**  
: Success – 조건에 맞는 채팅 세션/메시지가 페이지네이션으로 표시되고, 세부(스레드/미디어/메타)가 열람됨 / Failed – 결과 없음 또는 오류 안내

**Main Flow**
1. 사용자는 기간/상대/태그/키워드 등 필터를 선택하거나 키워드를 입력한다.  
2. 시스템은 인덱스에서 세션 목록을 조회하여 최신순으로 표시한다(미리보기: 마지막 메시지, 참가자, 시간, 미디어 배지).  
3. 사용자가 세션을 선택하면 타임라인 형태로 메시지를 로드하고, 날짜 구분/읽음 상태/첨부 미리보기를 렌더링한다.  
4. 사용자는 추가 필터(내 메시지만, 첨부 포함, 북마크만)와 키워드 하이라이트를 적용할 수 있다.  
5. 사용자는 메시지를 북마크하거나, 링크 복사/인용 복사 기능으로 공유/재사용한다.  
6. 시스템은 긴 세션에 대해 커서 기반 페이지네이션(위로 스크롤 시 이전 메시지 자동 로드)을 제공한다.  
7. (옵션) 사용자는 현재 보기를 내보내기(PDF/텍스트/JSON) 하거나, 삭제 보호된 항목을 제외하고 백업한다.

**Extensions**
- 1a. 키워드 오타/모호 → 1a1. 자동 교정·연관 검색어 제안 및 필터 완화 옵션 제공  
- 2b. 서버/네트워크 지연 → 2b1. 스켈레톤 UI와 재시도 버튼, 부분 결과 우선 표시  
- 3c. 민감 정보 포함 메시지 → 3c1. 마스킹 처리(이메일/전화/식별자), 권한에 따라 원문 보기 토글  
- 4d. 결과 0건 → 4d1. “조건에 맞는 기록이 없습니다” 안내 및 기간/필터 초기화 제안  
- 5e. 북마크 한도 초과 → 5e1. 정리/해제 유도 및 일괄 관리 모달 제공  
- 6f. 매우 긴 세션(>10만 메시지) → 6f1. 구간 인덱스/요약 로드(챕터), 세그먼트 단위 탐색 제공  
- 7g. 내보내기 실패/용량 초과 → 7g1. 범위 축소/포맷 변경 제안 및 비동기 생성 링크 제공  
- 7h. 권한 제한(비공개/삭제됨) → 7h1. 접근 차단 사유 표시, 감사 로그 남김

**Related**  
- Performance: 첫 페이지 조회 ≤ 500 ms, 추가 로드 ≤ 400 ms, 내보내기 생성 ≤ 5 s
- Frequency: 수시
- Concurrency: 다중 사용자 동시 열람(세션 격리)
- Due Date: M2


### Use Case #20 : 채팅 기록 삭제

**Summary**  
: 사용자가 채팅 세션 또는 개별 메시지를 삭제(단건/다건/전체)하여 기록을 정리한다. 보관함(휴지통)으로 이동하는 소프트 삭제와 영구 삭제를 지원한다.

**Scope / Level**  
: Chat History (Deletion), User Goal

**Author / Last Updated**  
: 김지광, 2025-10-31

**Actors**  
: Primary – 사용자, Secondary – 채팅 저장소(백엔드), 감사 로그/보존 정책 모듈, 인덱스(검색) 업데이트기

**Status**  
: Draft

**Preconditions**  
: (a) 로그인 상태 (b) 삭제 권한 보유(본인 대화/본인 메시지) (c) 세션/메시지 존재 (d) 보존 정책(법적 홀드) 위반 없음

**Trigger**  
: 사용자가 채팅 목록/세션 화면에서 “삭제(🗑️)” 또는 “선택 → 삭제”를 수행

**Post Conditions**  
: Success – 선택 항목이 휴지통으로 이동(소프트 삭제)되거나 영구 삭제됨(옵션), 검색 인덱스/카운트가 갱신됨 / Failed – 권한/정책 위반 또는 시스템 오류로 삭제 불가 안내

**Main Flow**
1. 사용자는 삭제 범위를 선택한다(메시지 단건/다중 선택/세션 전체).  
2. 시스템은 권한(작성자/참여자), 보존 정책(법적 홀드/회사 규정)을 점검한다.  
3. 시스템은 “휴지통으로 이동(복구 가능 N일)” vs “영구 삭제(복구 불가)” 옵션을 표시한다(기본: 휴지통).  
4. 사용자가 옵션을 확정하면 시스템은 대상 레코드의 상태를 업데이트하고(soft-delete 또는 purge), 검색 인덱스를 동기화한다.  
5. 시스템은 성공 토스트를 표시하고, 목록/세션에서 항목을 제거하거나 ‘삭제됨’ 플레이스홀더를 렌더링한다.  
6. (옵션) 사용자는 직후 “되돌리기(Undo)”를 선택해 삭제를 취소한다(예: 30초 내).  
7. 휴지통 보관 기간 만료 시, 시스템은 해당 항목을 자동 영구 삭제하고 감사 로그에 기록한다.

**Extensions**
- 2a. 권한 부족(타 사용자 메시지/비공개 세션) → 2a1. 삭제 차단 및 사유 안내  
- 2b. 보존 정책(법적 홀드/감사) 적용 → 2b1. 삭제 불가 안내, 관리자 요청 경로 표시  
- 3c. 대용량 다건 삭제(>1만 메시지) → 3c1. 배치 처리 및 진행률 표시, 완료 후 요약 리포트 제공  
- 4d. 인덱스 업데이트 실패 → 4d1. 재시도 및 비동기 동기화 큐로 전환, 일시적 검색 불일치 배지 표시  
- 5e. 세션 일부만 삭제 시 스레드 깨짐 → 5e1. “삭제됨” 플레이스홀더 유지 및 타임라인 정합성 보장  
- 6f. 되돌리기 시간 초과 → 6f1. 휴지통에서 복구 안내(기한 내)  
- 7g. 영구 삭제 요청 후 복구 요구 → 7g1. “복구 불가” 안내 및 백업 범위/정책 설명

**Related**  
- Performance: 단건 삭제 ≤ 300 ms, 다건(1k) ≤ 1.2 s, 인덱스 동기화 ≤ 2 s
- Frequency: 수시
- Concurrency: 다중 사용자 동시 삭제 허용(세션 락 최소화)
- Due Date: M2

